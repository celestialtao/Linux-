## Linux进程通信方式：

**当前的通信方式汇总**：

1. 管道(PIPE)
2. FIFO(命名管道)
3. XSI消息队列
4. XSI信号量
5. XSI共享内存
6. OSIX信号量
7. 域套接字(Domain Socket)
8. 信号(Signal)
9. 互斥量(Mutex)


*注：其中信号(signal)和信号量(semaphore)本质上并不算是进程间通信方式，应该是进程间同步的方式，但是也可以起到一定的通信作用，故也列在上面。另外普通的mutex是作用线程间同步用的，但是可以将进程A和进程B共享的内存中初始化一个mutex，这样就可以用将此mutex用作进程间通信用了*

### 一、管道
管道是一种单向数据流的进程通信方式。如在Linux的shell命令中，创建管道时需要用到“|”操作符。例如，下面的语句通知shell创建两个进程，并使用一个管道把这两个进程连接在一起：    
        $ ls | more   
 
第一个进程（执行ls程序）的标准输出被重定向到管道中，第二个进程（执行more程序）从这个管道中读取输入。以命令的操作同样可以通过创建临时文件实现，即通过以下命令：    
         $ ls > tmp    
         $ more < tmp
	
*通过以上对比，显然管道比创建临时文件更方便*   

  管道通信的缺陷： 

- 仅用于父子进程等有关联的进程之间来通信
- 由于管道是单工的，要实现互相通信，则要开两个管道

### 二、FIFO
命名管道（named pipe），也称为FIFO（First in,First out）,FIFO与管道有几个相似点：
       
- 在文件系统中不拥有磁盘块
- 打开的FIFO总是与一个内核缓冲区相关联
- 该缓冲区中临时存放两个或多个进程之间交换的数据

在2.6内核版本中，FIFO和管道无多少差别，使用相同的结构体pipe_inode_info,而两者的主要区别：

- FIFO是双工通信
- FIFO索引节点在系统目录树而非pipe特殊文件系统中

### 三、XSI IPC
XSI IPC与System V IPC是指同一种通信类型，消息队列、信号量、共享内容是System V之上建立的IPC。

进行IPC实现时，首要的是根据不同的通信方式，分别调用semget（）、msgget（）或者shmget（）函数创建新的IPC资源。且所有的IPC函数都必须经过适当的Linux系统调用。

#### 1）消息队列
- IPC消息可以实现进程间的通信，其方式为：
进程将产生的消息发送到消息队列中，直到另一进程读取到此消息，此消息一直会在队列中。

- 在此通信方式中，发送方不必等待接收方检查它所收到的消息就可以继续工作下去，而接收方如果没有收到消息也不需等待。消息队列是通过链表实现的，可以理解为消息的链表，即新消息都会放在链表的末尾。


#### 2）信号量

用信号量一般和其他共享资源如共享内存配合使用，解决多进程竞争。其主要特点：

- 信号量用于进程间同步，若要在进程间传递数据需要结合共享内存。
- 信号量基于操作系统的PV操作，程序对信号量的操作都是原子操作。
- 每次对信号量的PV操作不仅限于对信号量值加1或减1，而且可以加减任意正整数。
- 支持信号量组。

*PV操作：一种实现进程互斥与同步的有效方法*


#### 3）共享内存

两个进程通过虚拟内存空间映射至同一物理内存进行数据交换。其主要特点：

- 共享内存是最快的一种IPC，因为进程是直接对内存进行存取。
- 因为多个进程可以同时操作，所以需要进行同步。
- 信号量+共享内存通常结合在一起使用，信号量用来同步对共享内存的访问。


### 四、套接字

UNIX域套接字可用于主机上的通信，无需经过协议栈对数据进行封装校验等处理；socket套接字多用于主机间网络通信。





